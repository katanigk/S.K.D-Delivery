<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S.K.D – איסוף חבילות מחו"ל עד הבית</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Heebo',sans-serif;background:#f9f9f9;margin:0;padding:0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;}
    .container {background:#f4fcff;padding:20px 30px;margin:30px;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,0.1);width:100%;max-width:500px;border:1px solid #00bcd4;}
    h2 {font-size:22px;margin-bottom:10px;color:#111;text-align:center;}
    p {font-size:16px;color:#333;text-align:center;}
    label {display:block;margin-top:12px;font-weight:bold;}
    input[type="text"], textarea {width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:4px;font-size:16px;}
    textarea {resize:vertical;}
    .checkbox-container {margin-top:10px;}
    .checkbox-container input {margin-left:10px;}
    .btn {display:block;margin:20px 0;background-color:#00bcd4;color:white;border:none;padding:12px;border-radius:4px;font-size:16px;cursor:pointer;width:100%;}
    .summary-box {background:#f1f1f1;padding:10px;border-radius:4px;margin-top:10px;white-space:pre-line;}
    .footer {text-align: right;direction: rtl;font-size: 14px;margin-top: 20px;color: #333;line-height: 1.8;padding-right: 8px;}
    .footer p {text-align: right;}
    .contact-line {text-align:center;margin-top:20px;font-size:14px;}
    .header {background-color:#00bcd4;padding:16px 0;text-align:center;box-shadow:0 2px 5px rgba(0,0,0,0.1);border-radius:8px 8px 0 0;margin:-20px -30px 20px -30px;}
    .header-title {color:white;font-size:26px;font-weight:bold;}
    .header-sub {color:white;font-size:16px;margin-top:5px;}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-title">S.K.D Delivery</div>
      <div class="header-sub">איסוף חבילות מחו"ל עד הבית</div>
    </div>

    <h2>קיבלת SMS על חבילה?</h2>
    <p>שולחים לנו את ההודעה – ואנחנו מביאים עד הבית.</p>
    <p style="color:#555;">בלי מאמץ, בלי דאגות, פשוט וקל!</p>
<div style="background:#fff3cd; padding:12px 16px; border-radius:8px; margin:20px 0; color:#5d4037; font-size:15px; line-height:1.7;">
  <strong>קצת פרטים:</strong><br>
  השירות פועל בימים א׳–ה׳ בין השעות 09:00–18:00,<br>
  בכפוף לשעות הפעילות של בית העסק בו נמצאת החבילה.<br><br>
  <strong>המחירון שלנו – בלי אותיות קטנות:</strong><br>
  25 ש״ח לחבילה ראשונה<br>
  5 ש״ח לחבילה נוספת מאותו מקום<br>
  15 ש״ח לחבילה ממקום אחר<br><br>
  משלוחים בשישי או משלוחים מיוחדים – בתיאום מראש במייל:<br>
  <a href="mailto:deliveryskd@gmail.com">deliveryskd@gmail.com</a>
</div>

    <label>למי למסור?</label>
    <input type="text" id="name" />

    <label>טלפון אם יהיו שאלות</label>
    <input type="text" id="phone" />

    <label>כתובת למסירה</label>
    <input type="text" id="address" />

    <label>הנחיות מיוחדות (קומה, קוד כניסה וכו')</label>
    <input type="text" id="extraInfo" placeholder="לדוגמה: קומה 4, דירה 12, קוד 1234" />

    <label>מייל לצורך חשבונית</label>
    <input type="text" id="email" />

    <label>כאן צריך להדביק את ההודעה עם הפרטים על החבילה</label>
    <textarea id="sms" placeholder="לדוגמה: שלום ישראלה ישראלה, משלוח מ TEMU..."></textarea>

    <div class="checkbox-container">
      <input type="checkbox" id="samePlace" /> חבילה נוספת מאותו מקום
      <textarea id="sms2" placeholder="הודעת SMS נוספת (מאותו מקום)" disabled></textarea>
    </div>

    <div class="checkbox-container">
      <input type="checkbox" id="diffPlace" /> חבילה נוספת ממקום אחר
      <textarea id="sms3" placeholder="הודעת SMS נוספת (ממקום אחר)" disabled></textarea>
    </div>

    <label>משהו נוסף שכדאי לנו לדעת? </label>
    <textarea id="note"></textarea>

    <div class="checkbox-container">
      <label>אמצעי תשלום:</label><br>
      <label><input type="radio" name="paymentMethod" id="payBit" onclick="showBitNumber(true)" /> ביט</label><br>
      <div id="bitNumberLine" style="display:none; margin-right: 20px;">
        📲 תשלום בביט ל: <strong>052-3285367</strong>
      </div>
      <label><input type="radio" name="paymentMethod" id="payCash" onclick="showBitNumber(false)" /> מזומן לשליח</label>
    </div>

    <div class="checkbox-container">
      <input type="checkbox" id="termsConfirm" />
      מאשר/ת שקראתי את תנאי השירות ומסכים/ה להם
    </div>

    <button class="btn" onclick="calculateSummary()">חשב סיכום הזמנה</button>
    <div class="summary-box" id="summary"></div>

<p style="text-align:center; font-size: 16px; color:#333; margin-bottom: 10px;">
  בדקת שהכל בסדר? נשאר רק ללחוץ שליחה והחבילה בדרך אליך 🚴‍♂️📦
</p>

    <button class="btn" onclick="sendEmailOnly()">שליחה</button>

    <div class="footer">
      <h3>📜 תנאי שירות ומשלוחים</h3>
      <p>
1. הזמנת השליחות באחריות המזמין בלבד.<br>
2. השליח מבצע את השליחות לפי הכתובת שהוזנה, ואינו אחראי על מצב החבילה כפי שהתקבלה מהנקודה.<br>
3. החבילות סגורות ואטומות – לא ניתן לבדוק תכולה או תקינות.<br>
4. במשלוחים רגישים – חובה לציין בטופס. ייתכן ותחול תוספת תשלום.<br>
5. אין אחריות לנזק, אובדן או עיכוב הקשור בתכולת החבילה.<br>
6. שליחות תבוצע לאחר תשלום בפועל או בחירה במזומן.<br>
7. השירות זמין רק בתחום פתח תקווה.<br>
8. המסירה תבוצע תוך זמן קצר, ולא יאוחר מ־24 שעות.<br>
9. מילוי הטופס מהווה הסכמה לקבלת עדכונים, הצעות והודעות שיווקיות. ניתן להסיר בכל עת.<br>
10. מחירים עשויים להשתנות. המחיר שחל בעת ההזמנה – הוא המחייב.<br>
11. נעשה כל מאמץ לעמוד בזמנים, אך ייתכנו עיכובים שאינם בשליטתנו (מזג אוויר, תקלות וכו').<br>

    <p class="contact-line">
      📧 שאלה, פנייה או הצעה? – <a href="mailto:deliveryskd@gmail.com">deliveryskd@gmail.com</a>
    </p>
  </div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
(function() {
  emailjs.init("DRCnw2qGu7HZ6RQ4S");
})();

function showBitNumber(show) {
  document.getElementById("bitNumberLine").style.display = show ? "block" : "none";
}
function generateOrderId() {
  const now = new Date();
  return 'SKD-' + now.toISOString().replace(/[-T:.Z]/g, '').slice(0, 14);
}
function calculateSummary() {
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const address = document.getElementById('address').value.trim();
  const extraInfo = document.getElementById('extraInfo').value.trim();
  const email = document.getElementById('email').value.trim();
  const sms = document.getElementById('sms').value.trim();
  const sms2 = document.getElementById('sms2').value.trim();
  const sms3 = document.getElementById('sms3').value.trim();
  const note = document.getElementById('note').value.trim();
  const orderId = generateOrderId();
  window.currentOrderId = orderId;

  if (!name || !phone || !address || !email) {
    alert("יש למלא שם, טלפון, כתובת ומייל לפני חישוב סיכום הזמנה.");
    return;
  }

  let total = 25;
  if (document.getElementById('samePlace').checked) total += 5;
  if (document.getElementById('diffPlace').checked) total += 15;
  window.latestTotal = total;



  const paymentMethod = document.getElementById('payCash').checked
    ? "מזומן"
    : document.getElementById('payBit').checked
    ? "ביט"
    : null;

  if (!paymentMethod) {
    alert("יש לבחור אמצעי תשלום – ביט או מזומן.");
    return;
  }

   const packageCount = 1 
  + (document.getElementById('samePlace').checked ? 1 : 0) 
  + (document.getElementById('diffPlace').checked ? 1 : 0);

const clientSummary =
  `מספר הזמנה: ${orderId}\n` +
  `למי למסור: ${name}\n` +
  `כתובת למשלוח: ${address}\n` +
  `הוראות מיוחדות: ${extraInfo || "אין"}\n` +
  `מספר חבילות שהוזמנו: ${packageCount}\n` +
  `מייל לחשבונית: ${email}\n` +
  `איך בחרת לשלם: ${paymentMethod}\n` +
  `\nסה״כ לתשלום: ${total} ש"ח`;

document.getElementById("summary").innerText = clientSummary;

  const internalSummary =
    `📦 סיכום הזמנה:\n` +
    `מספר הזמנה: ${orderId}\n` +
    `שם: ${name}\n` +
    `טלפון: ${phone}\n` +
    `כתובת: ${address}\n` +
    `הוראות מיוחדות: ${extraInfo || "אין"}\n` +
    `מייל לחשבונית: ${email}\n\n` +
    `📩 הודעת SMS: ${sms || "לא נמסרה"}\n` +
    (sms2 ? `📦 חבילה נוספת מאותו מקום:\n${sms2}\n` : "") +
    (sms3 ? `📦 חבילה ממקום אחר:\n${sms3}\n` : "") +
    (note ? `הערות: ${note}\n` : "") +
       `מספר חבילות: ${packageCount}\n` +
    `אמצעי תשלום: ${paymentMethod}\n` +
    `סה״כ לתשלום: ${total} ש"ח`;

  window.latestSummary = internalSummary + `\n\n📲 מקור ההזמנה: direct`;
  
}

function sendEmailOnly() {
  if (!window.latestSummary) {
    alert("יש לחשב סיכום הזמנה לפני שליחה.");
    return;
  }

  if (!document.getElementById('termsConfirm').checked) {
    alert("יש לאשר את תנאי השירות לפני השליחה.");
    return;
  }

  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();
  const email = document.getElementById("email").value.trim();
  const payment = document.getElementById("payCash").checked ? 'מזומן' : 'ביט';
  const sms = document.getElementById("sms").value.trim();
  const sms2 = document.getElementById("sms2").value.trim();
  const sms3 = document.getElementById("sms3").value.trim();
  const note = document.getElementById("note").value.trim();

  const clientParams = {
    order_id: window.currentOrderId,
    to_name: name,
    to_email: email,
    phone: phone,
    address: address,
    payment_method: payment,
    total: window.latestTotal,
    sms: sms,
    sms2: sms2,
    sms3: sms3,
    note: note
  };

  emailjs.send('service_g3p8ge4', 'template_uc1juu9', clientParams)
    .then(() => {
      alert("✅ ההזמנה נשלחה בהצלחה!");
      sendTelegramMessage(window.latestSummary);
    })
    .catch(error => {
      alert("❌ שגיאה בשליחת מייל ללקוח: " + JSON.stringify(error));
    });
}


function sendTelegramMessage(message) {
  const TELEGRAM_TOKEN = "8198187646:AAGV8sbuaQIiCs1i54pNGYt4trK4YBX2wnA";
  const TELEGRAM_CHAT_ID = "7003207799";

  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message })
  });
}window.onload = function () {
  console.log("✅ window.onload התחיל");

  const samePlaceCheckbox = document.getElementById('samePlace');
  const diffPlaceCheckbox = document.getElementById('diffPlace');
  const sms2 = document.getElementById('sms2');
  const sms3 = document.getElementById('sms3');

  if (!samePlaceCheckbox || !diffPlaceCheckbox || !sms2 || !sms3) {
    console.error("❌ אחד האלמנטים לא נמצא – בדוק את ה־id בקובץ HTML");
    return;
  }

  samePlaceCheckbox.addEventListener('change', function () {
    sms2.disabled = !this.checked;
    console.log("📦 חבילה מאותו מקום – מצב: ", this.checked);
  });

  diffPlaceCheckbox.addEventListener('change', function () {
    sms3.disabled = !this.checked;
    console.log("📦 חבילה ממקום אחר – מצב: ", this.checked);
  });

  console.log("🎯 Event Listeners נטענו בהצלחה");
};

</script></body>
</html>